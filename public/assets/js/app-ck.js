var Interface={apiUrl:"http://colorrecovery.mxa-dev.com/public/public/api/",slider:{index:1,speed:500,duration:3e3,paused:!1}},Page={init:function(){this.enablePagination();this.enableContactforms();this.enableVideoPlayers()},load:function(e){$.ajax({type:"GET",url:Interface.apiUrl+"page/"+e,dataType:"json",data:"",success:function(e){$(".content").empty();for(var t=0;t<e.parts.length;t++)$(".content").append(e.parts[t])}})},render:function(){$("")},enablePagination:function(){$(".paginate").each(function(){if($(this).data("pagesize")!="all"){var e,t,n,r,i,s,o;e=this;n=[];r=0;i=1;o=parseInt($(this).data("pagesize"),10);$(this).hasClass("pag-"+o)||$(this).addClass("pag-"+o);s='<div class="page pag-'+o+'">';t=$(this).parent().find(".template-itemholder");t.find(".template-item").each(function(){if(r===o){i++;r=1;s+='</div><div class="page pag-'+o+'">'}else r++;n+=parseInt($(this).height(),10);s+=$(this)[0].outerHTML});s+="</div>";t.html('<div class="pages">'+s+"</div>");t.parent().find(".pagination-bar").empty();var u='<div class="pagination-bar"><div class="pagination"><ul class="slidertab">';for(var r=0;r<i;r++){var a=r+1;u+='<li class="p'+a+'"><a href="javascript:void(0);">'+a+"</a></li>"}u+="</ul></div></div>";t.append(u);t.find(".pagination-bar li a").unbind("click").click(function(t){var n=parseInt($(this).text(),10);Page.paginate(e,n)});t.find(".pagination-bar li:first-child").addClass("active");setTimeout(function(){Page.moveSlider(e,1)},Interface.slider.duration)}})},paginate:function(e,t){$(e).parents().find(".pagination-bar li").removeClass("active");$(e).parents().find(".pagination-bar li.p"+t+"").filter(":first").addClass("active");var n=$(e).parents().find(".pages").filter(":first"),r=$(e).find(".page:first-child").width()*(t-1);n.animate({left:-r},500)},moveSlider:function(e,t){var n=Interface.slider.index+t,r=$(e).find(".page").length;if(n>r){n=1;Interface.slider.index=1}if(Interface.slider.paused!==!0){Interface.slider.index=n;Page.paginate(e,n);setTimeout(function(){Page.moveSlider(e,1)},Interface.slider.duration)}},enableContactforms:function(){$("form.mailform").each(function(){var e=this;$(this).find("textarea").after('<br/><br/><button class="sendbutton">send</button>');$(this).find("button.sendbutton").unbind("click").click(function(t){t.preventDefault();var n=0,r="r="+Math.random();$(e).find("input").each(function(){var e=$(this).attr("name"),t=$(this).val();r+="&"+e+"="+t});$(e).find("textarea").each(function(){n++;r+="&text"+n+"="+$(this).val()});$.ajax({type:"POST",url:Interface.apiUrl+"sendmail",data:r,dataType:"json",complete:function(e){},success:function(t){console.log(t);t.error?alert(t.message):$(e).find(".sendbutton").unbind("click").animate({opacity:0},500,function(){$(this).html("message sent!").animate({opacity:1}).css("pointer-events","none")})},error:function(e){}})})})},enableVideoPlayers:function(){$(".content .video .player").each(function(){jwplayer(this).setup({flashplayer:"/assets/jwplayer/jwplayer.flash.swf",width:"100%",height:400,file:$(this).data("url"),controlbar:"bottom"})})}},List={root:"",clean_colors:["assets/images/CR_icon_leaf.svg","assets/images/CR_icon_prize.svg","assets/images/CR_icon_bottle.svg","assets/images/CR_icon_flag.svg"],certifying_programme:["assets/images/CR_icon_prize.svg"],collection_recovery:["assets/images/CR_icon_hands.svg","assets/images/CR_icon_sync.svg"],default_image:"assets/images/CR_iconholder.svg",init:function(e){var t=e.replace("-","_");this.root=$(".content").data("url");t==="clean_colors"&&this.replace(this.clean_colors);t==="certifying_programme"&&this.replace(this.certifying_programme);t==="collection_recovery"&&this.replace(this.collection_recovery)},replace:function(e){var t=this;$(".template-item").each(function(n,r){var i=e[n];i==undefined&&(i=t.default_image);$(this).css("background-image","url("+t.root+i+")")})}};$(document).ready(function(e){Page.init()});